{"version":3,"sources":["../../../../server/auth/local/index.js"],"names":[],"mappings":"AAAA;;;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA,IAAI,SAAS,kBAAQ,MAAR,EAAT;;AAEJ,OAAO,IAAP,CAAY,GAAZ,EAAiB,UAAS,GAAT,EAAc,GAAd,EAAmB,IAAnB,EAAyB;AACtC,uBAAS,YAAT,CAAsB,OAAtB,EAA+B,UAAS,GAAT,EAAc,IAAd,EAAoB,IAApB,EAA0B;;AAErD,YAAI,QAAQ,OAAO,IAAP,CAFyC;;AAIrD,YAAI,KAAJ,EAAW;AACP,mBAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,KAArB,CAAP,CADO;SAAX;AAGA,YAAI,CAAC,IAAD,EAAO;AACP,mBAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,EAAE,SAAS,yCAAT,EAAvB,CAAP,CADO;SAAX;;AAIA,YAAI,QAAQ,qBAAU,KAAK,GAAL,EAAU,KAAK,IAAL,CAA5B,CAXiD;;AAarD,gBAAQ,GAAR,CAAY,SAAZ,EAAuB,IAAvB,EAbqD;AAcrD,YAAI,IAAJ,CAAS,EAAE,YAAF,EAAT,EAdqD;KAA1B,CAA/B,CAeG,GAfH,EAeQ,GAfR,EAea,IAfb,EADsC;CAAzB,CAAjB;;kBAmBe","file":"index.js","sourcesContent":["'use strict';\n\nimport express from 'express'\nimport passport from 'passport'\nimport { signToken } from '../auth.service'\n\nvar router = express.Router()\n\nrouter.post('/', function(req, res, next) {\n    passport.authenticate('local', function(err, user, info) {\n\n        var error = err || info\n\n        if (error) {\n            return res.status(401).json(error)\n        }\n        if (!user) {\n            return res.status(404).json({ message: 'Something went wrong, please try again.' })\n        }\n\n        var token = signToken(user._id, user.role)\n\n        console.log('user is', user)\n        res.json({ token })\n    })(req, res, next)\n})\n\nexport default router\n"]}